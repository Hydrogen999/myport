<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat with John Doe - Let's Talk</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .chat-container {
            height: calc(100vh - 140px);
        }
        
        .messages-container {
            height: calc(100% - 80px);
            overflow-y: auto;
            scroll-behavior: smooth;
        }
        
        .message-bubble {
            max-width: 70%;
            border-radius: 18px;
            position: relative;
            animation: fadeInUp 0.3s ease;
        }
        
        .message-bubble.sent {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            margin-left: auto;
        }
        
        .message-bubble.received {
            background: #f1f5f9;
            color: #334155;
        }
        
        .dark .message-bubble.received {
            background: #374151;
            color: #e5e7eb;
        }
        
        .typing-indicator {
            display: flex;
            padding: 12px;
            background: #f1f5f9;
            border-radius: 18px;
            width: fit-content;
        }
        
        .dark .typing-indicator {
            background: #374151;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: #667eea;
            border-radius: 50%;
            margin: 0 2px;
            animation: typing 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .online-status {
            width: 12px;
            height: 12px;
            background: #22c55e;
            border-radius: 50%;
            border: 2px solid white;
        }
        
        .dark .online-status {
            border-color: #1f2937;
        }
        
        .chat-input {
            border-radius: 25px;
            resize: none;
        }
        
        .attachment-menu {
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }
        
        .attachment-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .message-time {
            font-size: 0.75rem;
            opacity: 0.7;
        }
        
        .message-status {
            font-size: 0.75rem;
        }
        
        .chat-header {
            backdrop-filter: blur(10px);
        }
        
        .scroll-button {
            opacity: 0;
            transform: scale(0);
            transition: all 0.3s ease;
        }
        
        .scroll-button.visible {
            opacity: 1;
            transform: scale(1);
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300">
    <!-- Chat Container -->
    <div class="max-w-4xl mx-auto shadow-2xl rounded-2xl overflow-hidden bg-white dark:bg-gray-800 chat-container my-8">
        <!-- Chat Header -->
        <div class="bg-gradient-to-r from-purple-600 to-blue-600 text-white p-6 chat-header">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <img src="mypic.jpg"
                             alt="FAWAZ ADE - Web Developer" 
                             class="w-12 h-12 rounded-full object-cover border-2 border-white">
                        <div class="online-status absolute bottom-0 right-0"></div>
                    </div>
                    <div>
                        <h2 class="text-xl font-semibold">FAWAZ ADE</h2>
                        <p class="text-purple-200 text-sm">Online - Replies instantly</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <button class="p-2 rounded-full hover:bg-purple-700 transition-colors">
                        <i class="fas fa-phone"></i>
                    </button>
                    <button class="p-2 rounded-full hover:bg-purple-700 transition-colors">
                        <i class="fas fa-video"></i>
                    </button>
                    <button class="p-2 rounded-full hover:bg-purple-700 transition-colors">
                        <i class="fas fa-info-circle"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Messages Container -->
        <div class="messages-container p-4 bg-gray-100 dark:bg-gray-700 custom-scrollbar" id="messagesContainer">
            <!-- Welcome Message -->
            <div class="message-bubble received mb-4 p-4">
                <p class="mb-1">Hey there! ðŸ‘‹ I'm John. Thanks for reaching out! How can I help you today?</p>
                <div class="message-time text-right text-xs mt-2">10:30 AM</div>
            </div>

            <!-- Sample conversation will be added here dynamically -->
        </div>

        <!-- Typing Indicator -->
        <div class="typing-indicator p-3 mx-4 mb-2 hidden" id="typingIndicator">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
        </div>

        <!-- Chat Input -->
        <div class="p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700">
            <div class="flex items-center space-x-2">
                <!-- Attachment Button -->
                <div class="relative">
                    <button id="attachmentBtn" class="p-3 text-gray-600 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 transition-colors">
                        <i class="fas fa-paperclip text-xl"></i>
                    </button>
                    
                    <!-- Attachment Menu -->
                    <div class="attachment-menu absolute bottom-full left-0 mb-2 bg-white dark:bg-gray-700 rounded-2xl shadow-2xl p-2 z-10">
                        <button class="flex items-center w-full p-3 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors">
                            <i class="fas fa-image text-green-500 mr-2"></i>
                            <span>Photo & Video</span>
                        </button>
                        <button class="flex items-center w-full p-3 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors">
                            <i class="fas fa-file text-blue-500 mr-2"></i>
                            <span>Document</span>
                        </button>
                        <button class="flex items-center w-full p-3 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors">
                            <i class="fas fa-map-marker-alt text-red-500 mr-2"></i>
                            <span>Location</span>
                        </button>
                    </div>
                </div>

                <!-- Message Input -->
                <div class="flex-1 relative">
                    <textarea 
                        id="messageInput" 
                        placeholder="Type your message..."
                        rows="1"
                        class="w-full py-3 px-4 border border-gray-300 dark:border-gray-600 rounded-full chat-input bg-gray-50 dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none"
                        oninput="autoResize(this)"
                    ></textarea>
                </div>

                <!-- Send Button -->
                <button id="sendButton" class="p-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-full hover:from-purple-700 hover:to-blue-700 transition-colors">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>

            <!-- Quick Replies -->
            <div class="flex flex-wrap gap-2 mt-3">
                <button class="quick-reply px-3 py-1 bg-gray-200 dark:bg-gray-600 rounded-full text-sm hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors">
                    ðŸ‘‹ Hello!
                </button>
                <button class="quick-reply px-3 py-1 bg-gray-200 dark:bg-gray-600 rounded-full text-sm hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors">
                    ðŸ’¼ Project Inquiry
                </button>
                <button class="quick-reply px-3 py-1 bg-gray-200 dark:bg-gray-600 rounded-full text-sm hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors">
                    ðŸ“… Schedule Meeting
                </button>
            </div>
        </div>

        <!-- Scroll to Bottom Button -->
        <button id="scrollButton" class="scroll-button fixed bottom-24 right-6 bg-purple-600 text-white p-3 rounded-full shadow-2xl hover:bg-purple-700 transition-colors">
            <i class="fas fa-arrow-down"></i>
        </button>
    </div>

    <!-- EmailJS Configuration -->
    <script>
        // Initialize EmailJS (replace with your actual credentials)
        emailjs.init("MGLdUZ9_2-_myZuGe");
        
        // Chat functionality
        const messages = [
            {
                text: "Hey there! ðŸ‘‹ I'm FAWAZ ADE. Thanks for reaching out! How can I help you today?",
                time: "10:30 AM",
                type: "received"
            }
        ];
        
        let isTyping = false;
        
        // DOM Elements
        const messagesContainer = document.getElementById('messagesContainer');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        const typingIndicator = document.getElementById('typingIndicator');
        const attachmentBtn = document.getElementById('attachmentBtn');
        const attachmentMenu = document.querySelector('.attachment-menu');
        const scrollButton = document.getElementById('scrollButton');
        
        // Initialize chat
        function initChat() {
            renderMessages();
            setupEventListeners();
            scrollToBottom();
        }
        
        // Render all messages
        function renderMessages() {
            messagesContainer.innerHTML = '';
            messages.forEach(message => {
                addMessageToChat(message.text, message.time, message.type, false);
            });
        }
        
        // Add message to chat
        function addMessageToChat(text, time, type, animate = true) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message-bubble ${type} mb-4 p-4 ${animate ? 'animate-fade-in-up' : ''}`;
            messageDiv.innerHTML = `
                <p class="mb-1">${text}</p>
                <div class="message-time text-right text-xs mt-2">${time}</div>
                ${type === 'sent' ? '<div class="message-status text-right text-xs mt-1">âœ“ Delivered</div>' : ''}
            `;
            messagesContainer.appendChild(messageDiv);
            scrollToBottom();
        }
        
        // Send message
        function sendMessage() {
            const text = messageInput.value.trim();
            if (!text) return;
            
            const time = getCurrentTime();
            const message = {
                text,
                time,
                type: 'sent'
            };
            
            messages.push(message);
            addMessageToChat(text, time, 'sent');
            messageInput.value = '';
            autoResize(messageInput);
            
            // Send email via EmailJS
            sendEmailNotification(text);
            
            // Simulate typing response
            simulateResponse();
        }
        
        // Send email notification
        function sendEmailNotification(message) {
            const templateParams = {
                from_name: "Website Visitor",
                to_name: "FAWAZ ADE",
                message: message,
                reply_to: "visitor@example.com",
                time: new Date().toLocaleString()
            };
            
            emailjs.send('adekolafawaz915@915', 'adekolafawaz915@915', templateParams)
                .then((response) => {
                    console.log('Email sent successfully:', response);
                    updateMessageStatus('âœ“ Read');
                })
                .catch((error) => {
                    console.error('Email send failed:', error);
                    updateMessageStatus('âš  Failed');
                });
        }
        
        // Update message status
        function updateMessageStatus(status) {
            const lastMessage = messagesContainer.lastElementChild;
            if (lastMessage) {
                const statusElement = lastMessage.querySelector('.message-status');
                if (statusElement) {
                    statusElement.textContent = status;
                }
            }
        }
        
        // Simulate typing and response
        function simulateResponse() {
            isTyping = true;
            typingIndicator.classList.remove('hidden');
            scrollToBottom();
            
            setTimeout(() => {
                isTyping = false;
                typingIndicator.classList.add('hidden');
                
                const responses = [
                    "That's great to hear! How can I assist you with that?",
                    "I understand. Let me know if you need any specific details.",
                    "Thanks for sharing! What's your timeline for this project?",
                    "Interesting! Do you have any specific requirements?",
                    "I'd love to help! Could you tell me more about your needs?"
                ];
                
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                const time = getCurrentTime();
                
                const responseMessage = {
                    text: randomResponse,
                    time,
                    type: 'received'
                };
                
                messages.push(responseMessage);
                addMessageToChat(randomResponse, time, 'received');
            }, 2000 + Math.random() * 2000);
        }
        
        // Get current time
        function getCurrentTime() {
            return new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }
        
        // Auto-resize textarea
        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
        }
        
        // Scroll to bottom
        function scrollToBottom() {
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        // Check if scrolled up
        function checkScrollPosition() {
            const { scrollTop, scrollHeight, clientHeight } = messagesContainer;
            const isScrolledUp = scrollHeight - scrollTop - clientHeight > 100;
            
            if (isScrolledUp) {
                scrollButton.classList.add('visible');
            } else {
                scrollButton.classList.remove('visible');
            }
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Send message on button click
            sendButton.addEventListener('click', sendMessage);
            
            // Send message on Enter key (but allow Shift+Enter for new line)
            messageInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            // Toggle attachment menu
            attachmentBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                attachmentMenu.classList.toggle('active');
            });
            
            // Close attachment menu when clicking outside
            document.addEventListener('click', () => {
                attachmentMenu.classList.remove('active');
            });
            
            // Quick replies
            document.querySelectorAll('.quick-reply').forEach(button => {
                button.addEventListener('click', () => {
                    messageInput.value = button.textContent.trim();
                    autoResize(messageInput);
                    messageInput.focus();
                });
            });
            
            // Scroll to bottom button
            scrollButton.addEventListener('click', scrollToBottom);
            
            // Check scroll position
            messagesContainer.addEventListener('scroll', checkScrollPosition);
            
            // Prevent attachment menu from closing when clicking inside
            attachmentMenu.addEventListener('click', (e) => {
                e.stopPropagation();
            });
        }
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', initChat);
        
        // Handle window resize
        window.addEventListener('resize', () => {
            autoResize(messageInput);
        });
    </script>
</body>
</html>
